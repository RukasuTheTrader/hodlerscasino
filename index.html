<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HODLer's Casino</title>
    <style>
        body {
            background-image: url('casino background.avif');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachement: fixed;
            font-family: 'Arial', sans-serif;
            color: #fff;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* In der Mitte horizontal und vertikal ausrichten */
        }

        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 80%;
            padding: 10px 0;
        }

        #jackCurrency {
            background-color: rgba(51, 51, 51, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            color: #75ff5e;
            font-size: 20px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            margin-right: 20px; /* Abstand zum rechten Rand */
        }

        .container {
            width: 30%;
            height: 30%;
            margin: auto;
            text-align: center; /* In der Mitte ausrichten */
        }

        .game {
            background-image: url('360_F_325384191_sg1D5lYWfRedGQsBm8xIHnsSAUUUVxGE.jpg');
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        #gameList {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 0 10%; /* gibt den Abstand zu den Seiten an */
        }

        #gameList li {
            flex: 1;
            text-align: center;
            margin: 0 5px; /* gibt einen kleinen Abstand zwischen den Spielen */
        }

        #gameList ul {
            list-style-type: none;
            padding: 0;
        }

        #gameList ul li {
            background-color: #333;
            padding: 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        #results {
            display: none;
            background-color: rgba(51, 51, 51, 0.7);
            padding: 10px;
            border-radius: 10px;
            margin-top: 20px;
            color: #fff;         
        }
        #diceJack, #magnitude {
            display: none;
        }
    </style>
</head>
<body>
<div id="header">
    <h1>HODLer's Casino</h1>
    <p>Remember to gamble responsibly and enjoy the games!</p>
    <div id="jackCurrency">
        <span id="jackAmount">1,000</span> Jack
    </div>
</div>

<div class="container">
    <div class="game-bar" id="gameList">
        <button onclick="showGame('diceJack')">DiceJack</button>
        <button onclick="showGame('magnitude')">Magnitude</button>
    </div>
    <div id="gameArea">
        <div id="diceJack" class="game">
            <h2>DiceJack</h2>
            <label for="bet">Bet:</label>
            <input type="range" id="bet" min="10" max="1000" value="10" step="5">
            <input type="number" id="betNumber" value="10" min="10">
            <button id="startButton" onclick="startGame()">Start</button>
            <div id="playerArea" class="hidden">
                <button id="rollButton" onclick="rollDice()" disabled>Roll</button>
                <button id="holdButton" onclick="hold()" disabled>Hold</button>
                <h3>Your score:<p id="playerScore">0</p></h3>
            </div>
            <div id="hostArea" class="hidden">
                <h3>Host's score:<p id="hostScore">0</p></h3>
            </div>
            <button id="reset" class="hidden" onclick="resetGame()">Reset</button>
            <br/>
            <hr/>
            <br/>
            <p><strong>Objective:</strong></p>
            <p>Get a score as close to 100 as possible without going over. If you cross 100, you lose instantly. If your score is greater than the host's score without crossing 100, you win.</p>
            <p><strong>How to Play:</strong></p>
            <ul>
                <li>Start by placing a bet. You can adjust the amount using the slider or input the amount directly.</li>
                <li>Click "Start" to begin the game.</li>
                <li>You have the option to "Roll" the dice or "Hold".</li>
                <li>If you choose to roll, a number between 1-100 will be added to your score.</li>
                <li>If you choose to hold, it's then the host's turn to roll.</li>
                <li>On the first roll, if the dice lands between 1 and 4, the game ends and you lose.</li>
                <li>The host tries to beat your score without going over 100.</li>
                <li>The game ends when:</li>
                <ul>
                    <li>You go over 100.</li>
                    <li>The host goes over 100.</li>
                    <li>The host beats your score.</li>
                    <li>You decide to hold and the host's subsequent rolls don't exceed your score.</li>
               </ul>
               <li>Click "Reset" to play again.</li>
           </ul>

        </div>
        <div id="magnitude" class="game">
            <h2>Magnitude</h2>
            <label for="magnitudeBet">Bet:</label>
            <input type="range" min="10" max="100" value="10" id="magnitudeBetSlider" oninput="updateMagnitudeBetValue(this.value);">
            <input type="number" id="magnitudeBetInput" value="10" oninput="updateMagnitudeSliderValue(this.value);">
            <button id="magnitudeRollBtn" onclick="rollMagnitude()">Roll</button>  
            <h3>Your score: <span id="playerRoll"></span></h3>
            <h3>Host's score: <span id="hostRoll"></span></h3>
            <h4>Result: <span id="magnitudeResult"></span></h4>
            <button id="magnitudeResetBtn" onclick="resetMagnitude()" disabled>Reset</button>
            <br/>
            <hr/>
            <br/>
            <p><strong>Objective:</strong></p>
            <p>Roll a number and have its digits' sum be greater than the host's. If the host's sum is 1, you lose instantly.</p>
            <p><strong>How to Play:</strong></p>
            <ul>
                <li>Begin by placing a bet. Adjust the amount using the slider or input it directly.</li>
                <li>Click "Roll" to generate a random number between 1-100 for both you and the host.</li>
                <li>The digits of the rolled number are summed up.</li>
                <li>If the host's sum is 1, you lose instantly.</li>
                <li>Compare the sum of your digits to the sum of the host's digits.</li>
                <li>If your sum is greater, you win double your bet. If not, you lose your bet.</li>
                <li>Click "Reset" to play again.</li>
           </ul>
        </div>
    </div>
</div>
<div id="results"></div>
<script>
function showGame(gameId) {
    // Verberge alle Spiele
    let games = document.querySelectorAll('#diceJack, #magnitude');
    games.forEach(game => {
        game.style.display = 'none';
    });

    // Zeige das ausgewählte Spiel
    document.getElementById(gameId).style.display = 'block';
}

function loadGame(gameId) {
    let games = ["diceJack", "magnitude"];
    games.forEach(game => {
        document.getElementById(game).style.display = game == gameId ? "block" : "none";
    });
}

document.addEventListener('DOMContentLoaded', (event) => {
    let betSlider = document.getElementById('bet');
    let betNumber = document.getElementById('betNumber');
    
    betSlider.addEventListener('input', function (e) {
        betNumber.value = e.target.value;
    });

    document.getElementById('startButton').addEventListener('click', startGame);
    document.getElementById('reset').addEventListener('click', resetGame);
    document.getElementById('reset').setAttribute('disabled', true);
    updateBetLimits();
});

let playerJack = 1000;
let playerScore = 0;
let hostScore = 0;
let gameInProgress = false;
let playerHeld = false;
let isFirstRoll = true;

function startGame() {
    if (gameInProgress) return;

    let bet = parseInt(document.getElementById('betNumber').value);
    if (isNaN(bet) || playerJack < bet || bet < 10) {
        alert('Invalid bet!');
        return;
    }

    playerJack -= bet;
    updateJackDisplay();

    // Einsatz-Slider und Einsatz-Feld deaktivieren
    document.getElementById('bet').setAttribute('disabled', true);
    document.getElementById('betNumber').setAttribute('disabled', true);

    document.getElementById('playerArea').classList.remove('hidden');
    document.getElementById('startButton').setAttribute('disabled', true);
    document.getElementById('rollButton').removeAttribute('disabled');
    document.getElementById('holdButton').removeAttribute('disabled');
    gameInProgress = true;
    playerHeld = false;
    isFirstRoll = true;
}

function rollDice() {
    if (!gameInProgress || playerHeld) return;
    
    let roll = Math.floor(Math.random() * 100) + 1; // Dies garantiert, dass roll zwischen 1 und 100 ist.
    
    if (isFirstRoll && roll <= 4) {
        endGame(false);
        showResults(false);
        return;
    }

    isFirstRoll = false;
    playerScore += roll;
    document.getElementById('playerScore').innerText = playerScore.toString();
    
    if (playerScore > 100) {
        endGame(false);
        showResults(false);
    }
}

function hold() {
    if (!gameInProgress || playerHeld) return;
    document.getElementById('hostArea').classList.remove('hidden');
    playerHeld = true;
    hostTurn();
}

function hostTurn() {

    isFirstRoll = true;
    
    if (!gameInProgress || (hostScore > playerScore && hostScore <= 100)) return;
    
    let roll = Math.floor(Math.random() * 100) + 1; // Dies garantiert, dass roll zwischen 1 und 100 ist.
    
    if (isFirstRoll && roll <= 4) {
        endGame(false);
        showResults(false);
        return;
    }
    
    isFirstRoll = false;
    hostScore += roll;
    document.getElementById('hostScore').innerText = hostScore.toString();
    
    if (hostScore > 100) {
        endGame(true);
        showResults(true);
    } else if (hostScore > playerScore) {
        endGame(false);
        showResults(false);
    } else {
        setTimeout(hostTurn, 1000);
    }
}

function endGame(playerWins) {
    gameInProgress = false;
    document.getElementById('reset').classList.remove('hidden');
    document.getElementById('reset').removeAttribute('disabled');

    let bet = parseInt(document.getElementById('betNumber').value);
    if (playerWins) playerJack += bet * 2; // Gewinn des Spielers ist das Zweifache des Einsatzes
    updateJackDisplay();
    showResults(playerWins);
}

function showResults(playerWins) {
    let resultMessage = playerWins ? 'You win!' : 'You lose!';
    let resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = `<p>${resultMessage}</p><p>Player Score: ${playerScore}</p><p>Host Score: ${hostScore}</p>`;
    resultsDiv.style.display = 'block';
}

function resetGame() {
    gameInProgress = false;
    playerHeld = false;
    isFirstRoll = true;

    // Einsatz-Slider und Einsatz-Feld aktivieren
    document.getElementById('bet').removeAttribute('disabled');
    document.getElementById('betNumber').removeAttribute('disabled');

    document.getElementById('reset').classList.add('hidden');
    document.getElementById('playerArea').classList.add('hidden');
    document.getElementById('hostArea').classList.add('hidden');
    document.getElementById('results').style.display = 'none';
    document.getElementById('startButton').removeAttribute('disabled');
    document.getElementById('reset').setAttribute('disabled', true);
    document.getElementById('rollButton').setAttribute('disabled', true);
    document.getElementById('holdButton').setAttribute('disabled', true);

    playerScore = 0;
    hostScore = 0;
    document.getElementById('playerScore').innerText = '0';
    document.getElementById('hostScore').innerText = '0';
}

function updateJackDisplay() {
    const jackAmountElement = document.getElementById('jackAmount');
    jackAmountElement.textContent = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 0
    }).format(playerJack);

    updateBetLimits();
}

function updateBetLimits() {
    let betSlider = document.getElementById('bet');
    let betNumber = document.getElementById('betNumber');

    betSlider.max = playerJack;
    betNumber.max = playerJack;

    if (playerJack < 10) {
        betSlider.disabled = true;
        betNumber.disabled = true;
    } else {
        betSlider.disabled = false;
        betNumber.disabled = false;
        if (betSlider.value < 10) {
            betSlider.value = 10;
            betNumber.value = 10;
        } else if (betSlider.value > playerJack) {
            betSlider.value = playerJack;
            betNumber.value = playerJack;
        }
    }
}
    
//magnitude:
function updateMagnitudeBetValue(value) {
    let slider = document.getElementById("magnitudeBetSlider");
    let input = document.getElementById("magnitudeBetInput");

    if (value < 10) {
        value = 10;
    }
    
    input.value = value;
    slider.value = value;
}

function updateMagnitudeSliderValue(value) {
    let slider = document.getElementById("magnitudeBetSlider");
    let input = document.getElementById("magnitudeBetInput");
    
    if (value < 10) {
        value = 10;
    } else if(value > playerJack) {
        value = playerJack;
    }
    
    input.value = value;
    slider.max = playerJack;
    slider.value = value;
}

function updatePlayerJackDisplay() {
    document.getElementById("playerJackDisplay").innerText = playerJack;
}

function rollMagnitude() {
    // Setze den Slider und das Inputfeld auf unveränderlich
    document.getElementById("magnitudeBetSlider").disabled = true;
    document.getElementById("magnitudeBetInput").disabled = true;
    document.getElementById("magnitudeRollBtn").disabled = true;
    
    let bet = parseInt(document.getElementById("magnitudeBetInput").value);
    playerJack -= bet;
    updateJackDisplay();

    let playerNumber = Math.floor(Math.random() * 100) + 1;
    let hostNumber = Math.floor(Math.random() * 100) + 1;

    document.getElementById("playerRoll").innerText = playerNumber;
    setTimeout(() => {
        document.getElementById("hostRoll").innerText = hostNumber;
        determineWinner(playerNumber, hostNumber, bet);
        document.getElementById("magnitudeResetBtn").disabled = false;
    }, 1000);
}

function determineWinner(player, host, bet) {
    let playerSum = quersumme(player);
    let hostSum = quersumme(host);

    if (hostSum == 1) {
        document.getElementById("magnitudeResult").innerText = "You lose!";
    } else if (playerSum > hostSum) {
        playerJack += bet * 2;
        document.getElementById("magnitudeResult").innerText = "You win!";
    } else if (playerSum < hostSum) {
        document.getElementById("magnitudeResult").innerText = "You lose!";
    } else {
        playerJack += bet;
        document.getElementById("magnitudeResult").innerText = "It's a draw!";
    }
    updateJackDisplay();
}

function quersumme(num) {
    let sum = 0;
    while (num) {
        sum += num % 10;
        num = Math.floor(num / 10);
    }
    return sum;
}

function resetMagnitude() {
    document.getElementById("magnitudeBetSlider").disabled = false;
    document.getElementById("magnitudeBetInput").disabled = false;
    document.getElementById("magnitudeRollBtn").disabled = false;
    document.getElementById("magnitudeResetBtn").disabled = true;

    document.getElementById("magnitudeResult").innerText = "";
    document.getElementById("playerRoll").innerText = "";
    document.getElementById("hostRoll").innerText = "";
    updateMagnitudeSliderValue(10);
    updateJackDisplay();
}

// Diese Funktion soll beim Start des Spiels aufgerufen werden, 
// um den Slider korrekt zu initialisieren.
function initMagnitude() {
    updateMagnitudeSliderValue(10); // Dies stellt sicher, dass der Anfangswert 10 ist
    updateJackDisplay();
}

initMagnitude();
</script>
</body>
</html>
